<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="Transport" namespace="Transport.OtherModels.tdbf" xmlns="urn:nhibernate-mapping-2.2">
  <class name="waybills" lazy="false" >
  
    <composite-id>
      <key-property name="ownerId" column="ownerId" />
      <key-property name="waybillNumber" column="waybillNumber" />
      <key-property name="garageNumber" column="garageNumber" />
    </composite-id>
   

    <property name="waybillPosition" update="false">
      <column name="waybillPosition" sql-type="bigint" not-null="false" />
    </property>
    <property name="waybillState">
      <column name="waybillState" sql-type="tinyint" not-null="true" />
    </property>
    <property name="waybillTypeId">
      <column name="waybillTypeId" sql-type="int" not-null="false" />
    </property>
    
    <property name="waybillPackageNumber">
      <column name="waybillPackageNumber" sql-type="int" not-null="false" />
    </property>
    <property name="departureDate">
      <column name="departureDate" sql-type="smalldatetime" not-null="false" />
    </property>
    <property name="returnDate">
      <column name="returnDate" sql-type="smalldatetime" not-null="false" />
    </property>
    <property name="odometerInvalid">
      <column name="odometerInvalid" sql-type="bit" not-null="false" />
    </property>
    <property name="mhmeterInvalid">
      <column name="mhmeterInvalid" sql-type="bit" not-null="false" />
    </property>
    <property name="departureKm">
      <column name="departureKm" sql-type="decimal" not-null="false" />
    </property>
    <property name="returnKm">
      <column name="returnKm" sql-type="decimal" not-null="false" />
    </property>
    <property name="departureMh">
      <column name="departureMh" sql-type="decimal" not-null="false" />
    </property>
    <property name="returnMh">
      <column name="returnMh" sql-type="decimal" not-null="false" />
    </property>
    <property name="licence">
      <column name="licence" sql-type="varchar" not-null="false" />
    </property>
    <property name="formNumber">
      <column name="formNumber" sql-type="varchar" not-null="false" />
    </property>
    <property name="trailerGarageNumber">
      <column name="trailerGarageNumber" sql-type="int" not-null="false" />
    </property>
    <property name="way">
      <column name="way" sql-type="varchar" not-null="false" />
    </property>
    <property name="whenClosed">
      <column name="whenClosed" sql-type="datetime" not-null="false" />
    </property>
    <property name="whoClosed">
      <column name="whoClosed" sql-type="varchar" not-null="false" />
    </property>
    <property name="_dbf">
      <column name="_dbf" sql-type="bit" not-null="false" />
    </property>
    <property name="waybillIdentity" insert="false" update="false">
      <column name="waybillIdentity" sql-type="bigint" not-null="false" />
    </property>
    <property name="accountantChecked">
      <column name="accountantChecked" sql-type="smalldatetime" not-null="false" />
    </property>
    
    <property name="scheduleId">
      <column name="scheduleId" sql-type="int" not-null="false" />
    </property>
    
    <property name="shift">
      <column name="shift" sql-type="tinyint" not-null="false" />
    </property>
    <property name="_system">
      <column name="_system" sql-type="tinyint" not-null="false" />
    </property>
    <property name="limitYear">
      <column name="limitYear" sql-type="smallint" not-null="false" />
    </property>
    <property name="limitMonth">
      <column name="limitMonth" sql-type="tinyint" not-null="false" />
    </property>
    <property name="accYear">
      <column name="accYear" sql-type="smallint" not-null="false" />
    </property>
    <property name="accMonth">
      <column name="accMonth" sql-type="tinyint" not-null="false" />
    </property>
    <property name="WorkMinute">
      <column name="WorkMinute" sql-type="smallint" not-null="false" />
    </property>
    <property name="WaybillId" insert="false" update="false">
      <column name="WaybillId" sql-type="int" not-null="true" />
    </property>
    <property name="TriggerOff">
      <column name="TriggerOff" sql-type="tinyint" not-null="false" />
    </property>
    
     
    <!--
    <bag name="AccFuelConsumptions" inverse="true" cascade="none">
      <key column="garagenumber" />
      <one-to-many class="AccFuelConsumption" />
    </bag>
    <bag name="serviceWaybills" inverse="true" cascade="none">
      <key column="garageNumber" />
      <one-to-many class="serviceWaybill" />
    </bag>
    <bag name="TFDayInspections" inverse="true" cascade="none">
      <key column="garagenumber" />
      <one-to-many class="TFDayInspection" />
    </bag>
    <bag name="waybillsDrivers" inverse="true" cascade="none">
      <key column="garageNumber" />
      <one-to-many class="waybillsDriver" />
    </bag>
    <bag name="waybillsFuelRemains" inverse="true" cascade="none">
      <key column="garageNumber" />
      <one-to-many class="waybillsFuelRemain" />
    

     <bag name="waybillsTasks" inverse="true" cascade="none" lazy="false" >

        <key>
           <column name="ownerId"/>           
           <column name="waybillNumber"/>
           <column name="garageNumber"/>
        </key>

        <one-to-many class="waybillsTasks" />
     </bag>


     <bag name="waybillsFuelRemains" inverse="true" cascade="none" lazy="false">
        <key>
           <column name="ownerId"/>
           <column name="waybillNumber"/>
           <column name="garageNumber"/>
        </key>

        <one-to-many class="waybillsFuelRemains" />
     </bag>
     
     
     
     
          <bag name="drivers" table="waybillsDrivers" lazy="false" fetch="subselect">
        <key>
           <column name="ownerId"/>
           <column name="garageNumber"/>
           <column name="waybillNumber"/>
        </key>
        <many-to-many column="driverId" class="Driver" />
     </bag>
     

     <bag name="driversResponse" table="waybillsDriversResponse" lazy="false" fetch="subselect" >
        <key>
           <column name="ownerId"/>
           <column name="garageNumber"/>
           <column name="waybillNumber"/>
        </key>
        <many-to-many column="driverId" class="Driver" />
     </bag>
     
     
     
     

     <bag name="waybillsFuelRemains" inverse="true" cascade="none" lazy="false" fetch="subselect">
        <key>
           <column name="ownerId"/>
           <column name="waybillNumber"/>
           <column name="garageNumber"/>
        </key>

        <one-to-many class="waybillsFuelRemains" />
     </bag>
     
     
     
-->




  </class>
</hibernate-mapping>